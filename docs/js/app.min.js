(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{!function(e){const t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}))}));const e=document.querySelector(".inputs");new class{constructor(e,t){this.element=e,this.activeClass=t,this.observer=this.observer.bind(this),this.observer()}observer(){const e=this.element,t=this.activeClass,s=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add(t),s.unobserve(e.target))}))}));s.observe(e)}}(e,"inputs--active"),new class{constructor(e,t){this.options=e,this.burger=document.querySelector(e.burger),this.menu=document.querySelector(e.menu),this.menuActive=e.menuActive,this.test=t,this.init()}init=()=>{this.test&&(console.log(this.burger),console.log(this)),this.burger.addEventListener("click",this.toggleMenu),document.addEventListener("click",this.closeMenu)};toggleMenu=()=>{this.menu.classList.toggle(this.menuActive)};closeMenu=e=>{const t=e.target;t.closest(this.options.burger)||t.closest(this.options.menu)||this.menu.classList.remove(this.menuActive)}}({burger:".burger",menu:".nav",menuActive:"nav--active"}),new class{constructor(e,t,s,o){this.buttons=e,this.modal=t,this.modalBody=s,this.modalActive=o,this.init()}init=()=>{const e=this.buttons,t=this.modal,s=this.modalBody;e.forEach((e=>{e.addEventListener("click",this.toggleModal)})),t.addEventListener("click",(e=>{e.target.closest(s)||this.toggleModal()}))};toggleModal=()=>{const e=this.modal,t=this.modalActive;e.classList.toggle(t),document.querySelector("body").classList.toggle("body--modal")}}(document.querySelectorAll(".button"),document.querySelector(".modal"),".modal__phone","modal--active");const t=document.querySelector(".inputs");new class{constructor(e,t,s,o){this.form=e,this.server=t,this.test=o,this.afterSend=s,this.init()}init=()=>{const e=this.form;e.addEventListener("submit",(t=>{t.preventDefault();const s=new FormData(e),o=[...s],i=[];o.forEach((e=>{"name"===e[0]&&i.push(this.validateName(e[1])),"phone"===e[0]&&i.push(this.validatePhone(e[1]))})),i.every((e=>!0===e))&&this.fetchForm(s)}))};validateName=e=>/[А-ЯЁA-Z][а-яёa-z]+/.test(e)?(this.form.querySelector("input[name=name]").style.boxShadow="0px 0px 15px green",!0):(this.form.querySelector("input[name=name]").style.boxShadow="0px 0px 15px red",!1);validatePhone=e=>/\+{0,1}\d+/.test(e)?(this.form.querySelector("input[name=phone]").style.boxShadow="0px 0px 15px green",!0):(this.form.querySelector("input[name=phone]").style.boxShadow="0px 0px 15px red",!1);fetchForm=async e=>{const t=this.server,s=await fetch(t,{method:"POST",body:e}),o=await s.json();!0===this.test&&console.log(o),this.afterSend()}}(t,"server",(()=>{console.log("Form sended")}),!0)})();